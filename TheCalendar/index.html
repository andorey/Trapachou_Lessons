<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>The Calendar</title>
	<style>
		#parent {
			text-align: center;
		}
		#calendar {
			display: inline-block;
		}
		#calendar td, #calendar th {
			padding: 5px 12px;
			border: 1px solid black;
			text-align: center;
		}
		.today{
			background: #fe0000;
			color: white;
		}
	</style>
</head>
<body>
<div id="parent">
	<div id="calendar">
		<table>
			<tbody class="body"></tbody>
		</table>
	</div>
</div>

<script>
	
    let calendar = document.querySelector('#calendar');
    let table = calendar.querySelector('table');
    let body = calendar.querySelector('.body');

    let date  = new Date();
    let year  = date.getFullYear();
    let month = date.getMonth();
    
    buildCalendar(year, month);
	
    function buildCalendar(year, month) {
        let lastDays = new Date(year, month + 1, 0).getDate();
        let infoMonth = new Date(year, month, lastDays);
        let firstWeekDay = new Date(year, month, 1).getDay();
        // let firstDay = new Date(infoMonth.getFullYear(), infoMonth.getMonth(), 1).getDay();


        tableHead();
        calendarBuild();

        function tableHead() {
            let thead = document.createElement('thead');
            let tr = document.createElement('tr');
            let arr = ['пн', 'вт', 'ср', 'чт', 'пт', 'сб','вс'];
            arr.forEach(function(el){
                let th = document.createElement('th');
                th.innerHTML = el;
                tr.appendChild(th)
            });
            thead.appendChild(tr)
            table.appendChild(thead)
        }

        function calendarBuild(){
            const arr = arrDays(firstWeekDay,lastDays);
            gridBuild(Math.fround(arr.length/7))
            let allTd = table.querySelectorAll('td');
            
			for(let i = 0; i < allTd.length; i++){
				if(arr[i] === new Date().getDate() &&
					infoMonth.getFullYear() === new Date().getFullYear() &&
					infoMonth.getMonth() === new Date().getMonth()
				){
				    allTd[i].classList.add('today')
				}
				
				allTd[i].innerHTML = arr[i] === undefined ? '' : arr[i];
			}
        }
    }
	
	
    function gridBuild(x){
        for (let i = 0; i < x; i++){
            let tr = document.createElement('tr');
            for (let j = 0; j < 7; j++){
                let td = document.createElement('td');
                tr.appendChild(td)
            }
            table.appendChild(tr)
        }
	}

    function arrDays(day, lastDay){
        const arr = [];
        let k = 1;
        for (let i = day > 0 ? 1 - day : -6; i < lastDay; i++){
            if ( i < 0){
                arr.push('');
            }else{
                arr.push(i+1);
            }
        }
        return arr;
    }
	
 
</script>
</body>
</html>